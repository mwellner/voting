version: '2'
services:
  db:
    build: ./db/
    image: mwellner/voting-db
    ports:
    - "5555:5432"
  redis:
    image: redis:alpine
    ports:
    - "8888:6379"
  result-python:
    build: ./result-python/
    image: mwellner/voting-result-python
    ports:
    - "8081:5000"
    links:
    - "db"
  result-nodejs:
    build: ./result-nodejs/
    image: mwellner/voting-result-nodejs
    ports:
    - "8080:3000"
    links:
    - "db"
  input-python:
    build: ./input-python/
    image: mwellner/voting-input-python
    ports:
    - "8090:5000"
    links:
    - "redis"
  worker:
    build: ./worker-nodejs/
    image: mwellner/voting-worker-nodejs
    links:
    - "redis"
    - "db"
